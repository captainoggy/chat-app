<DModalBody
  @title="sidebar.categories_form.title"
  @class="sidebar-categories-form-modal"
>
  <form class="sidebar-categories-form">
    {{#each this.categoryGroupings as |categories|}}
      <div
        class="sidebar-categories-form__row"
        style={{html-safe (border-color categories.1.color "left")}}
      >

        {{#each categories as |category|}}
          <div
            class="sidebar-categories-form__category-row"
            data-category-id={{category.id}}
            data-category-level={{category.level}}
          >
            <label
              class="sidebar-categories-form__category-label"
              for={{concat "sidebar-categories-form__input--" category.id}}
            >
              <div class="sidebar-categories-form__category-badge">
                {{category-badge category}}
              </div>

              {{#unless category.parentCategory}}
                <div class="sidebar-categories-form__category-description">
                  {{dir-span category.description_excerpt htmlSafe="true"}}
                </div>
              {{/unless}}
            </label>

            <Input
              id={{concat "sidebar-categories-form__input--" category.id}}
              class="sidebar-categories-form__input"
              @type="checkbox"
              @checked={{includes this.selectedSidebarCategoryIds category.id}}
              {{on "click" (action "toggleCategory" category.id)}}
            />
          </div>
        {{/each}}
      </div>
    {{/each}}
  </form>
</DModalBody>

<div class="modal-footer">
  <DButton
    @class="btn-primary sidebar-categories-form__save-button"
    @label="sidebar.categories_form.save"
    @disabled={{this.saving}}
    @action={{this.save}}
  />
</div>